<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>ğŸ“º Ù„Ø§ÙŠÙ Ø³Ø¨ÙˆØ±Øª</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta http-equiv="refresh" content="300">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap');
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'Tajawal', sans-serif;
    background: #121212;
    color: #ddd;
    overflow-x: hidden;
    padding-bottom: 100px;
  }
  header {
    text-align: center;
    padding: 20px;
    color: #4db6ac;
    text-shadow: 0 0 8px #4db6ac;
  }
  .search-box {
    text-align: center;
    margin: 10px auto;
  }
  .search-box input {
    padding: 8px 12px;
    border-radius: 12px;
    border: 1px solid #4db6ac;
    width: 80%;
    max-width: 320px;
    font-size: 14px;
    background: #222;
    color: #ddd;
  }
  .search-box input::placeholder {
    color: #aaa;
  }
  .channel-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 12px;
    padding: 10px;
    max-width: 800px;
    margin: auto;
  }
  .channel-card {
    position: relative;
    background: #1e1e1e;
    border: 2px solid #4db6ac;
    border-radius: 12px;
    padding: 12px;
    text-align: center;
    font-size: 13px;
    transition: 0.3s;
    transform: scale(0.95);
    color: #ddd;
  }
  .channel-card:hover {
    transform: scale(1);
    box-shadow: 0 0 15px #4db6ac;
    border-color: #26a69a;
  }
  .live-tag {
    position: absolute;
    top: 8px;
    left: 8px;
    background: #d32f2f;
    color: #fff;
    font-size: 11px;
    padding: 3px 6px;
    border-radius: 6px;
    font-weight: 700;
    letter-spacing: 0.5px;
  }
  button {
    background: #26a69a;
    border: none;
    color: #fff;
    padding: 8px 14px;
    border-radius: 10px;
    cursor: pointer;
    font-weight: 600;
    margin-top: 10px;
    transition: background 0.3s;
  }
  button:hover {
    background: #1d7c73;
  }
  .popup-player {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #121212;
    padding: 15px;
    border-radius: 15px;
    z-index: 9999;
    width: 90%;
    max-width: 800px;
    box-shadow: 0 0 25px #26a69a;
  }
  .popup-player video {
    width: 100%;
    border-radius: 15px;
    background: #000;
  }
  .close-btn {
    background: #d32f2f;
    color: #fff;
    border: none;
    padding: 6px 14px;
    border-radius: 10px;
    cursor: pointer;
    margin-top: 10px;
    font-weight: 600;
  }
  .refresh-btn {
    background: #4db6ac;
    color: #121212;
    border: none;
    padding: 8px 16px;
    border-radius: 12px;
    font-size: 15px;
    cursor: pointer;
    font-weight: 700;
    transition: background 0.3s;
  }
  .refresh-btn:hover {
    background: #26a69a;
    color: #fff;
  }
</style>
</head>
<body>

<header>
  <h1>âš½ Ù„Ø§ÙŠÙ Ø³Ø¨ÙˆØ±Øª</h1>
  <p>ğŸ“£ ØªØ§Ø¨Ø¹Ù†Ø§ Ø¹Ù„Ù‰ <a href="https://t.me/alialiah123456" target="_blank" style="color:#4db6ac;">Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…</a></p>
  <button class="refresh-btn" onclick="location.reload()">ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©</button>
</header>

<div class="search-box">
  <input type="text" id="searchInput" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ù‚Ù†Ø§Ø©...">
</div>

<section class="channel-grid" id="channelGrid"></section>

<!-- Ù‚Ø³Ù… Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª -->
<div id="comments-section" style="max-width:800px;margin:auto;padding:20px;">
  <h2 style="color:#4db6ac;text-align:center;">ğŸ’¬ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª</h2>
  <form id="comment-form">
    <textarea id="comment-text" placeholder="Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ùƒ..." required style="width:100%;height:80px;padding:8px;border-radius:6px;border:1px solid #4db6ac;color:#121212;"></textarea>
    <button id="comment-submit" type="submit" style="background:#26a69a;color:#fff;padding:8px 14px;border:none;border-radius:8px;cursor:pointer;font-weight:600;margin-top:8px;">Ù†Ø´Ø±</button>
  </form>
  <div id="comments-list" style="margin-top:20px;"></div>
</div>

<div class="popup-player" id="popupPlayer">
  <video id="mainPlayer" controls autoplay></video>
  <br>
  <button onclick="document.getElementById('mainPlayer').requestFullscreen()">â›¶ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©</button>
  <button class="close-btn" onclick="closePopup()">âŒ Ø¥ØºÙ„Ø§Ù‚</button>
</div>

<script>
const channels = [
  { name: 'Ù‚Ù†Ø§Ø© 1', quality: 'HD', url: 'https://stream.sainaertebat.com/hls2/varzeshtest.m3u8' },
  { name: 'Ù‚Ù†Ø§Ø© 2', quality: 'HD', url: 'https://solhtvhls.wns.live/hls/stream.m3u8' },
  { name: 'Ù‚Ù†Ø§Ø© 3', quality: 'HD', url: 'https://server10.mp3quran.net/ajm/128/018.mp3' },
  { name: 'Ù‚Ù†Ø§Ø© 4', quality: 'HD', url: 'https://stream.sainaertebat.com/hls2/bein1.m3u8' },
  { name: 'Ù‚Ù†Ø§Ø© 5', quality: 'HD', url: 'http://avrstream.com:1935/live/' },
  { name: 'Ù‚Ù†Ø§Ø© 6', quality: 'HD', url: 'https://v.redd.it/5svby2yfhj6f1/HLS_AUDIO_128.m3u8' },
  { name: 'Ù‚Ù†Ø§Ø© 7', quality: 'HD', url: 'http://m.live.net.sa:1935/live/quran/playlist.m3u8' },
  { name: 'Ù‚Ù†Ø§Ø© 8', quality: 'HD', url: 'https://cdn.karwan.tv/nrt-sport/tracks-v1a1/mono.m3u8' },
  { name: 'Ù‚Ù†Ø§Ø© 9', quality: 'HD', url: 'https://svs.itworkscdn.net/smc4sportslive/smc4.smil/playlist.m3u8' },
  { name: 'Ù‚Ù†Ø§Ø© 10', quality: 'HD', url: 'https://dmitwlvvll.cdn.mgmlcdn.com/dubaisportshd5/smil:dubaisportshd5.smil/chunklist_b1600000.m3u8' }
];

function renderChannels(list = channels) {
  const container = document.getElementById('channelGrid');
  container.innerHTML = '';
  list.forEach(ch => {
    const card = document.createElement('div');
    card.className = 'channel-card';
    card.innerHTML = `
      <div class="live-tag">Ù…Ø¨Ø§Ø´Ø±</div>
      <h3>${ch.name}</h3>
      <p style="font-size:11px;color:#80cbc4;">${ch.quality}</p>
      <button onclick="openPopup('${ch.url}')">Ù…Ø´Ø§Ù‡Ø¯Ø©</button>
    `;
    container.appendChild(card);
  });
}

function openPopup(url) {
  const popup = document.getElementById('popupPlayer');
  const player = document.getElementById('mainPlayer');
  player.src = url;
  popup.style.display = 'block';
}
function closePopup() {
  const popup = document.getElementById('popupPlayer');
  const player = document.getElementById('mainPlayer');
  player.pause();
  player.src = '';
  popup.style.display = 'none';
}

document.getElementById('searchInput').addEventListener('input', function() {
  const term = this.value.toLowerCase();
  const filtered = channels.filter(ch => ch.name.toLowerCase().includes(term));
  renderChannels(filtered);
});

document.addEventListener('DOMContentLoaded', () => {
  renderChannels();
});

// ===== Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø¹Ø¨Ø± JSONBin =====
const BIN_ID = "6897562143b1c97be91a4196";
const API_KEY = "$2a$10$vF8U.bXLL3PmmvTRQknAJOWs8Yj52rkDgDIUfg2elLiXOQgvvwRDS";
const API_URL = `https://api.jsonbin.io/v3/b/${BIN_ID}`;

function escapeHtml(str) {
  if (!str) return '';
  return str.replace(/&/g, '&amp;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;')
            .replace(/"/g, '&quot;')
            .replace(/'/g, '&#039;');
}

async function getBinRecord() {
  try {
    const res = await fetch(API_URL, {
      headers: { "X-Master-Key": API_KEY }
    });
    if (!res.ok) return { comments: [] };
    const data = await res.json();
    return data.record || { comments: [] };
  } catch {
    return { comments: [] };
  }
}

async function loadComments() {
  commentsList.innerHTML = '<p style="color:#9e9e9e">Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª...</p>';
  const record = await getBinRecord();
  const arr = Array.isArray(record.comments) ? record.comments : [];
  if (!arr.length) {
    commentsList.innerHTML = '<p style="color:#9e9e9e">Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø¨Ø¹Ø¯.</p>';
    return;
  }
  commentsList.innerHTML = arr.map(c => {
    return `<div style="border-bottom:1px solid #444;padding:8px 0;">
              <div style="color:#80cbc4;font-size:12px;">${escapeHtml(c.name)} â€” ${escapeHtml(c.time)}</div>
              <p style="margin:5px 0;">${escapeHtml(c.text)}</p>
            </div>`;
  }).join('');
}

async function addCommentToBin(text) {
  const record = await getBinRecord();
  const arr = Array.isArray(record.comments) ? record.comments : [];

  arr.push({
    name: 'Ø²Ø§Ø¦Ø±',
    time: new Date().toLocaleString('ar-EG'),
    text: text
  });

  await fetch(API_URL, {
    method: "PUT",
    headers: {
      "Content-Type": "application/json",
      "X-Master-Key": API_KEY
    },
    body: JSON.stringify({ comments: arr })
  });

  commentText.value = '';
  loadComments();
}

commentForm.addEventListener('submit', async e => {
  e.preventDefault();
  const t = commentText.value.trim();
  if (!t) return alert('Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ù‹Ø§ Ø£ÙˆÙ„Ø§Ù‹.');
  await addCommentToBin(t);
});

const commentForm = document.getElementById('comment-form');
const commentText = document.getElementById('comment-text');
const commentsList = document.getElementById('comments-list');

loadComments();
</script>
</body>
</html>
